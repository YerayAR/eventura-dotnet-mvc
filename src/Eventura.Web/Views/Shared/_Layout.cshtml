@using System.Globalization
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Eventura - Plataforma moderna para gestionar eventos, reservas y experiencias en vivo." />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="theme-color" content="#2563eb" />
    <title>@ViewData["Title"] - Eventura</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%232563eb'/%3E%3Ctext x='50' y='70' text-anchor='middle' font-size='65' font-weight='bold' fill='white' font-family='system-ui'%3Eev%3C/text%3E%3C/svg%3E" />
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%232563eb'/%3E%3Ctext x='50' y='70' text-anchor='middle' font-size='65' font-weight='bold' fill='white' font-family='system-ui'%3Eev%3C/text%3E%3C/svg%3E" />
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%232563eb'/%3E%3Ctext x='50' y='70' text-anchor='middle' font-size='65' font-weight='bold' fill='white' font-family='system-ui'%3Eev%3C/text%3E%3C/svg%3E" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body class="app-shell">
    <a class="skip-link" href="#main-content">Saltar al contenido principal</a>
    <header class="app-header">
        <div class="app-nav" role="navigation" aria-label="Navegaci√≥n principal">
            <a class="brand" asp-controller="Home" asp-action="Index">
                <span class="brand-icon" aria-hidden="true">ev</span>
                Eventura
            </a>
            <button class="nav-toggle" type="button" data-nav-toggle aria-controls="main-navigation" aria-expanded="false" aria-label="Abrir men√∫">
                <span class="sr-only">Abrir men√∫</span>
                ‚ò∞
            </button>
            <div class="nav-links" id="main-navigation" data-open="false">
                <a class="nav-link" asp-controller="Home" asp-action="Index">Inicio</a>
                <a class="nav-link" asp-controller="Events" asp-action="Index">Eventos</a>
                <a class="nav-link" asp-controller="Reservations" asp-action="MyReservations">Mis reservas</a>
                <a class="nav-link" asp-controller="Events" asp-action="Recommendations">Recomendaciones</a>
                <a class="nav-link" asp-controller="Admin" asp-action="Dashboard">Panel admin</a>
                @if (User.IsInRole("Admin"))
                {
                    <a class="nav-link" asp-controller="Import" asp-action="Index">üåê Importar eventos</a>
                }
                <div class="nav-auth">
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        var initials = User.Identity!.Name?.Length switch
                        {
                            >= 2 => User.Identity.Name![..2].ToUpper(CultureInfo.InvariantCulture),
                            1 => (User.Identity.Name![0] + "‚Ä¢").ToUpper(CultureInfo.InvariantCulture),
                            _ => "EV"
                        };
                        <span class="avatar" aria-hidden="true">@initials</span>
                        <form asp-controller="Account" asp-action="Logout" method="post" class="nav-form">
                            @Html.AntiForgeryToken()
                            <button type="submit" class="nav-button">Cerrar sesi√≥n</button>
                        </form>
                    }
                    else
                    {
                        <a class="nav-link" asp-controller="Account" asp-action="Login">Iniciar sesi√≥n</a>
                        <a class="nav-link nav-cta" asp-controller="Account" asp-action="Register">Crear cuenta</a>
                    }
                </div>
            </div>
        </div>
    </header>
    <main class="main" id="main-content" tabindex="-1">
        <div class="container">
            @if (TempData["Success"] is string successMessage)
            {
                <div class="alert alert-success" role="status">
                    <span aria-hidden="true">‚úÖ</span>
                    <div>@successMessage</div>
                </div>
            }
            @if (TempData["Error"] is string errorMessage)
            {
                <div class="alert alert-error" role="alert">
                    <span aria-hidden="true">‚ö†Ô∏è</span>
                    <div>@errorMessage</div>
                </div>
            }
            @if (TempData["Warning"] is string warningMessage)
            {
                <div class="alert alert-warning" role="status">
                    <span aria-hidden="true">üü°</span>
                    <div>@warningMessage</div>
                </div>
            }
            @RenderBody()
        </div>
    </main>
    <footer class="footer">
        <p>&copy; @DateTime.UtcNow.Year <span>Eventura</span> ¬∑ Crear experiencias que inspiran</p>
    </footer>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
